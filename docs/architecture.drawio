<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36" version="29.5.6">
  <diagram id="editor-architecture" name="Image Editor Architecture">
    <mxGraphModel dx="1722" dy="938" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" parent="1" style="text;html=1;fontSize=24;fontStyle=1;fontFamily=Noto Sans SC;align=center;verticalAlign=middle;" value="图片编辑器双引擎架构" vertex="1">
          <mxGeometry height="40" width="400" x="500" y="20" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;endArrow=classic;endFill=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="700" y="200" as="sourcePoint" />
            <mxPoint x="700" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow1_label" parent="1" style="text;html=1;fontSize=12;fontFamily=Noto Sans SC;align=center;verticalAlign=middle;" value="调用统一接口" vertex="1">
          <mxGeometry height="20" width="100" x="710" y="220" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4A90D9;endArrow=classic;endFill=1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="550" y="420" />
              <mxPoint x="350" y="420" />
            </Array>
            <mxPoint x="550" y="380" as="sourcePoint" />
            <mxPoint x="350" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow2_label" parent="1" style="text;html=1;fontSize=12;fontFamily=Noto Sans SC;align=center;verticalAlign=middle;fontColor=#4A90D9;" value="engine=&#39;konva&#39;" vertex="1">
          <mxGeometry height="20" width="120" x="380" y="395" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#7B68EE;endArrow=classic;endFill=1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="850" y="420" />
              <mxPoint x="1050" y="420" />
            </Array>
            <mxPoint x="850" y="380" as="sourcePoint" />
            <mxPoint x="1050" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow3_label" parent="1" style="text;html=1;fontSize=12;fontFamily=Noto Sans SC;align=center;verticalAlign=middle;fontColor=#7B68EE;" value="engine=&#39;pixi&#39;" vertex="1">
          <mxGeometry height="20" width="120" x="900" y="395" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#4A90D9;endArrow=classic;endFill=1;dashed=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="570" as="sourcePoint" />
            <mxPoint x="350" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow5" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#7B68EE;endArrow=classic;endFill=1;dashed=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1050" y="570" as="sourcePoint" />
            <mxPoint x="1050" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ui_layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#333333;fillColor=#E8F4FD;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="120" width="500" x="450" y="80" as="geometry" />
        </mxCell>
        <mxCell id="ui_layer_title" parent="1" style="text;html=1;fontSize=14;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#333333;" value="UI 层" vertex="1">
          <mxGeometry height="25" width="100" x="470" y="90" as="geometry" />
        </mxCell>
        <mxCell id="photo_editor" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#4A90D9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=13;" value="PhotoEditor/index.vue" vertex="1">
          <mxGeometry height="50" width="180" x="480" y="120" as="geometry" />
        </mxCell>
        <mxCell id="ui_desc" parent="1" style="text;html=1;fontSize=11;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#666666;" value="• 引擎选择界面&lt;br&gt;• 滤镜参数管理&lt;br&gt;• 画笔模式控制" vertex="1">
          <mxGeometry height="60" width="140" x="680" y="115" as="geometry" />
        </mxCell>
        <mxCell id="api_layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#333333;fillColor=#FFF3E0;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="110" width="500" x="450" y="270" as="geometry" />
        </mxCell>
        <mxCell id="api_layer_title" parent="1" style="text;html=1;fontSize=14;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#333333;" value="通用 API 层 (package/editor)" vertex="1">
          <mxGeometry height="25" width="250" x="470" y="280" as="geometry" />
        </mxCell>
        <mxCell id="iimage_editor" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#FF9800;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=12;" value="IImageEditor&lt;br&gt;&lt;font style=&quot;font-size:10px&quot;&gt;(接口定义)&lt;/font&gt;" vertex="1">
          <mxGeometry height="50" width="120" x="480" y="310" as="geometry" />
        </mxCell>
        <mxCell id="create_editor" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#FF9800;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=12;" value="createImageEditor&lt;br&gt;&lt;font style=&quot;font-size:10px&quot;&gt;(工厂函数)&lt;/font&gt;" vertex="1">
          <mxGeometry height="50" width="130" x="620" y="310" as="geometry" />
        </mxCell>
        <mxCell id="canvas_layout" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#FF9800;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=12;" value="canvasLayout&lt;br&gt;&lt;font style=&quot;font-size:10px&quot;&gt;(布局计算)&lt;/font&gt;" vertex="1">
          <mxGeometry height="50" width="110" x="770" y="310" as="geometry" />
        </mxCell>
        <mxCell id="konva_engine" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#4A90D9;fillColor=#E3F2FD;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="120" width="460" x="120" y="450" as="geometry" />
        </mxCell>
        <mxCell id="konva_title" parent="1" style="text;html=1;fontSize=14;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#1565C0;" value="Konva 引擎 (CPU)" vertex="1">
          <mxGeometry height="25" width="180" x="140" y="460" as="geometry" />
        </mxCell>
        <mxCell id="konva_adapter" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#4A90D9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="KonvaImageEditor&lt;br&gt;Adapter" vertex="1">
          <mxGeometry height="55" width="100" x="140" y="490" as="geometry" />
        </mxCell>
        <mxCell id="image_editor" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#4A90D9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="ImageEditor&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;(Konva 封装)&lt;/font&gt;" vertex="1">
          <mxGeometry height="55" width="100" x="260" y="490" as="geometry" />
        </mxCell>
        <mxCell id="filter_manager" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#4A90D9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="ImageFilter&lt;br&gt;Manager" vertex="1">
          <mxGeometry height="55" width="100" x="380" y="490" as="geometry" />
        </mxCell>
        <mxCell id="konva_badge" parent="1" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#4A90D9;fillColor=#BBDEFB;fontFamily=Noto Sans SC;fontSize=10;" value="Canvas 2D" vertex="1">
          <mxGeometry height="30" width="70" x="500" y="460" as="geometry" />
        </mxCell>
        <mxCell id="pixi_engine" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#7B68EE;fillColor=#EDE7F6;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="120" width="460" x="820" y="450" as="geometry" />
        </mxCell>
        <mxCell id="pixi_title" parent="1" style="text;html=1;fontSize=14;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#512DA8;" value="PixiJS 引擎 (GPU)" vertex="1">
          <mxGeometry height="25" width="180" x="840" y="460" as="geometry" />
        </mxCell>
        <mxCell id="pixi_editor" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#7B68EE;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="PixiImage&lt;br&gt;Editor" vertex="1">
          <mxGeometry height="55" width="80" x="840" y="490" as="geometry" />
        </mxCell>
        <mxCell id="pixi_filter" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#7B68EE;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="PixiFilter&lt;br&gt;Manager" vertex="1">
          <mxGeometry height="55" width="80" x="935" y="490" as="geometry" />
        </mxCell>
        <mxCell id="pixi_brush" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#7B68EE;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="PixiBrush&lt;br&gt;Manager" vertex="1">
          <mxGeometry height="55" width="80" x="1030" y="490" as="geometry" />
        </mxCell>
        <mxCell id="pixi_transformer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#7B68EE;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=11;" value="Pixi&lt;br&gt;Transformer" vertex="1">
          <mxGeometry height="55" width="80" x="1125" y="490" as="geometry" />
        </mxCell>
        <mxCell id="pixi_badge" parent="1" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#7B68EE;fillColor=#D1C4E9;fontFamily=Noto Sans SC;fontSize=10;" value="WebGL 2" vertex="1">
          <mxGeometry height="30" width="60" x="1210" y="460" as="geometry" />
        </mxCell>
        <mxCell id="konva_filters" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#4A90D9;fillColor=#E3F2FD;fontFamily=Noto Sans SC;dashed=1;" value="" vertex="1">
          <mxGeometry height="80" width="460" x="120" y="630" as="geometry" />
        </mxCell>
        <mxCell id="konva_filters_title" parent="1" style="text;html=1;fontSize=12;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#1565C0;" value="KonvaFilter (自定义滤镜)" vertex="1">
          <mxGeometry height="20" width="200" x="140" y="640" as="geometry" />
        </mxCell>
        <mxCell id="filter_contrast" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#90CAF9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=10;" value="Contrast&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;(LUT 优化)&lt;/font&gt;" vertex="1">
          <mxGeometry height="35" width="80" x="140" y="665" as="geometry" />
        </mxCell>
        <mxCell id="filter_temp" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#90CAF9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=10;" value="Temperature" vertex="1">
          <mxGeometry height="35" width="80" x="230" y="665" as="geometry" />
        </mxCell>
        <mxCell id="filter_shadow" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#90CAF9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=10;" value="Shadow" vertex="1">
          <mxGeometry height="35" width="80" x="320" y="665" as="geometry" />
        </mxCell>
        <mxCell id="filter_highlight" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#90CAF9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=10;" value="Highlight" vertex="1">
          <mxGeometry height="35" width="80" x="410" y="665" as="geometry" />
        </mxCell>
        <mxCell id="filter_etc" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#90CAF9;fillColor=#FFFFFF;fontFamily=Noto Sans SC;fontSize=10;" value="..." vertex="1">
          <mxGeometry height="35" width="40" x="500" y="665" as="geometry" />
        </mxCell>
        <mxCell id="pixi_shaders" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#7B68EE;fillColor=#EDE7F6;fontFamily=Noto Sans SC;dashed=1;" value="" vertex="1">
          <mxGeometry height="80" width="460" x="820" y="630" as="geometry" />
        </mxCell>
        <mxCell id="pixi_shaders_title" parent="1" style="text;html=1;fontSize=12;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#512DA8;" value="shaders.ts (GLSL 着色器)" vertex="1">
          <mxGeometry height="20" width="200" x="840" y="640" as="geometry" />
        </mxCell>
        <mxCell id="shader_desc" parent="1" style="text;html=1;fontSize=11;fontFamily=Noto Sans SC;align=left;verticalAlign=middle;fontColor=#666666;" value="单 Pass GPU 渲染：对比度 + 色温 + 饱和度 + 阴影 + 高光 + 增强" vertex="1">
          <mxGeometry height="35" width="420" x="840" y="665" as="geometry" />
        </mxCell>
        <mxCell id="legend_box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;strokeColor=#999999;fillColor=#FAFAFA;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="100" width="300" x="60" y="80" as="geometry" />
        </mxCell>
        <mxCell id="legend_title" parent="1" style="text;html=1;fontSize=12;fontStyle=1;fontFamily=Noto Sans SC;align=left;verticalAlign=top;fontColor=#333333;" value="图例" vertex="1">
          <mxGeometry height="20" width="60" x="80" y="90" as="geometry" />
        </mxCell>
        <mxCell id="legend_konva" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#4A90D9;fillColor=#E3F2FD;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="80" y="115" as="geometry" />
        </mxCell>
        <mxCell id="legend_konva_text" parent="1" style="text;html=1;fontSize=11;fontFamily=Noto Sans SC;align=left;verticalAlign=middle;fontColor=#333333;" value="Konva (CPU 渲染)" vertex="1">
          <mxGeometry height="20" width="120" x="110" y="115" as="geometry" />
        </mxCell>
        <mxCell id="legend_pixi" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#7B68EE;fillColor=#EDE7F6;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="80" y="145" as="geometry" />
        </mxCell>
        <mxCell id="legend_pixi_text" parent="1" style="text;html=1;fontSize=11;fontFamily=Noto Sans SC;align=left;verticalAlign=middle;fontColor=#333333;" value="PixiJS (GPU 渲染)" vertex="1">
          <mxGeometry height="20" width="120" x="110" y="145" as="geometry" />
        </mxCell>
        <mxCell id="legend_api" parent="1" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;strokeColor=#FF9800;fillColor=#FFF3E0;fontFamily=Noto Sans SC;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="240" y="115" as="geometry" />
        </mxCell>
        <mxCell id="legend_api_text" parent="1" style="text;html=1;fontSize=11;fontFamily=Noto Sans SC;align=left;verticalAlign=middle;fontColor=#333333;" value="通用 API 层" vertex="1">
          <mxGeometry height="20" width="80" x="270" y="115" as="geometry" />
        </mxCell>
        <mxCell id="version" parent="1" style="text;html=1;fontSize=10;fontFamily=Noto Sans SC;align=right;verticalAlign=bottom;fontColor=#999999;" value="v1.4.0 | 2026-02-27" vertex="1">
          <mxGeometry height="20" width="130" x="1150" y="830" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
